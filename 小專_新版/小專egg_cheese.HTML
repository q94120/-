<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>點餐系統</title>
    <link rel="stylesheet" href="./_css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="./css.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <div class="cart">
        <div class="cart-header">
            <h2 style="margin-left: 10px;margin-top: 70px;  font-weight: bolder;">外送</h2>
            <button class="close-cart" style="margin-top: 50px;"><i class="bi bi-x-circle close-btn"></i></button>
        </div>
        <div class="cart-content">
            <div class="cart-items"></div>
            <div class="cart-total">總金額: $<span>0.00</span></div>
            <a href="./小專_會員登入.html">
                <button class="bg-warning rounded border-warning"
                    style="position: absolute; bottom: 0;width: 400px;height: 40px;margin-bottom: 10px;">查看付款方式及地址</button>
            </a>
        </div>
    </div>
    <div class="row me-5" style="margin-left: 100px">
        <div class="col-xl-5 figcard mt-4 popup-button" data-target="popupCard1" style="margin-left: 50px">
            <div class="row">
                <div class="col-6" style="margin-top: 15px;">
                    <b>起司蛋餅</b>
                    <br>
                    <div class="">$52</div>
                    <br>
                    <div class="fw-light">香濃鹹香的起司搭配蛋餅皮，絕對經典的蛋餅口味！</div>
                </div>
                <div class="col-6">
                    <img src="./img/起司蛋餅.jfif" alt="" class="imgdemo">
                </div>
            </div>
        </div>
        <!-- 起司蛋餅card -->
        <div id="popupCard1" class="popup-card">
            <div class="popup-content">
                <span class="close-button" onclick="closePopup('popupCard1')"
                    style="font-size: 24px; color: rgb(255, 225, 0); z-index: 9999;">
                    <i class="bi bi-x-circle"></i>
                </span>
                <div class="card">
                    <img src="./img/起司蛋餅.jfif" class="imgsize">
                </div>
                <br>
                <h2>起司蛋餅</h2>
                <small class="text-muted">香濃鹹香的起司搭配蛋餅皮，絕對經典的蛋餅口味！</small>
                <br><br>
                <b>$52</b>
                <hr>
                
                <form>
                    <label for="multiline-input">餐點備註</label>
                    <p class="text-muted" style="font-size: small;margin-top: 7px;">
                        有些餐點無法更改食材或調味料；若無法符合您的要求，請見諒哦
                    </p>
                    <textarea id="multiline-input" name="multiline-input" placeholder="例:不要醬料、加辣"></textarea>
                </form>
                <b>若此商品目前暫時無法供應</b>
                <div class="dropdown">
                    <input class="read" type="text" placeholder="選擇一個選項" readonly>
                    <div class="dropdown-content">
                        <div>將此商品從我的訂單移除</div>
                        <div>取消訂單或請店家打電話給我</div>
                    </div>
                </div>
                <br><br><br><br><br><br><br><br>
                <hr>
                <!-- 加入購物車按鈕部分 -->
                <div class="products">
                    <h2>&nbsp;</h2>
                    <div class="product" data-name="起司蛋餅" data-price="52" data-image="./img/起司蛋餅.jfif">
                        <button class="quantity-button decrease">-</button>
                        <input value="1" min="1" class="quantity-input" readonly>
                        <button class="quantity-button increase">+</button>
                        <button class="add-to-cart bg-warning rounded border-warning card-shopbtn">放入購物車</button>
                    </div>
                </div>
                <br>
            </div>
        </div>
        <div class="col-xl-5 figcard mt-4 popup-button" data-target="popupCard2" style="margin-left: 50px">
            <div class="row">
                <div class="col-6" style="margin-top: 15px;">
                    <b>豬排蛋現烤吐司</b>
                    <br>
                    <div class="">$72</div>
                    <br>
                    <div class="fw-light">口感香脆多汁，一口咬下讓人享受到絕妙的美味融合，絕對是令人難以忘懷的美食享受！</div>

                </div>
                <div class="col-6">
                    <img src="./img/豬排蛋吐司.jfif" alt="" class="imgdemo">
                </div>
            </div>
        </div>
        <!-- 豬排蛋吐司Card -->
        <div id="popupCard2" class="popup-card">
            <div class="popup-content">
                <span class="close-button" onclick="closePopup('popupCard2')"
                    style="font-size: 24px; color: rgb(255, 225, 0); z-index: 9999;">
                    <i class="bi bi-x-circle"></i>
                </span>
                <div class="card">
                    <img src="./img/豬排蛋吐司.jfif" class="imgsize">
                </div>
                <br>
                <h2>豬排蛋現烤吐司</h2>
                <small class="text-muted">口感香脆多汁，一口咬下讓人享受到絕妙的美味融合，絕對是令人難以忘懷的美食享受！</small>
                <br><br>
                <b>$72</b>
                <hr>
                <label for="addEgg2" class="addEggHover">
                    <input type="checkbox" id="addEgg2" class="add-egg-option">
                    <span style="margin-left: 5px;">加蛋</span>
                    <span class="egg-price">$15</span>
                </label>
                <label for="addcheese2" class="addEggHover">
                    <input type="checkbox" id="addcheese2" class="add-egg-option">
                    <span style="margin-left: 5px;">加起司</span>
                    <span class="cheese-price">$10</span>
                </label>
                <form>
                    <label for="multiline-input">餐點備註</label>
                    <p class="text-muted" style="font-size: small;margin-top: 7px;">
                        有些餐點無法更改食材或調味料；若無法符合您的要求，請見諒哦
                    </p>
                    <textarea id="multiline-input" name="multiline-input" placeholder="例:不要醬料、加辣"></textarea>
                </form>
                <b>若此商品目前暫時無法供應</b>
                <div class="dropdown">
                    <input class="read" type="text" placeholder="選擇一個選項" readonly>
                    <div class="dropdown-content">
                        <div>將此商品從我的訂單移除</div>
                        <div>取消訂單或請店家打電話給我</div>
                    </div>
                </div>
                <br><br><br><br><br><br><br><br>
                <hr>
                <div class="products">
                    <h2>&nbsp;</h2>
                    <div class="product" data-name="豬排蛋現烤吐司" data-price="72" data-image="./img/豬排蛋吐司.jfif">
                        <button class="quantity-button decrease">-</button>
                        <input value="1" min="1" class="quantity-input" readonly>
                        <button class="quantity-button increase">+</button>
                        <button class="add-to-cart bg-warning rounded border-warning card-shopbtn" data-egg="addEgg2" data-cheese="addCheese2">
                            放入購物車
                        </button>
                    </div>
                </div>
                <br>
            </div>
        </div>

        <div class="col-xl-5 figcard mt-4 popup-button" data-target="popupCard5" style="margin-left: 50px">
            <div class="row">
                <div class="col-6" style="margin-top: 15px;">
                    <b>好事花生牛肉紫米漢堡</b>
                    <br>
                    <div class="">$104</div>
                    <br>
                    <div class="fw-light">結合了花生香、牛肉鮮美與紫米營養，一口咬下，豐富的層次與口感令人愛不釋手！</div>

                </div>
                <div class="col-6">
                    <img src="./img/好事花生紫米堡.jfif" alt="" class="imgdemo">
                </div>
            </div>
        </div>

        <!-- 紫米堡card -->
        <div id="popupCard5" class="popup-card">
            <div class="popup-content">
                <span class="close-button" onclick="closePopup('popupCard5')"
                    style="font-size: 24px; color: rgb(255, 225, 0); z-index: 9999;">
                    <i class="bi bi-x-circle"></i>
                </span>
                <div class="card">
                    <img src="./img/好事花生紫米堡.jfif" class="imgsize">
                </div>
                <br>
                <h2>好事花生牛肉紫米漢堡</h2>
                <small class="text-muted">結合了花生香、牛肉鮮美與紫米營養，一口咬下，豐富的層次與口感令人愛不釋手！</small>
                <br><br>
                <b>$104</b>
                <hr>
                <label for="addEgg" class="addEggHover">
                    <input type="checkbox" id="addEgg" class="add-egg-option">
                    <span style="margin-left: 5px;">加蛋</span> 
                    <span class="egg-price">$15</span>
                </label>
                <br>
                <form>
                    <label for="multiline-input">餐點備註</label>
                    <p class="text-muted" style="font-size: small;margin-top: 7px;">
                        有些餐點無法更改食材或調味料；若無法符合您的要求，請見諒哦
                    </p>
                    <textarea id="multiline-input" name="multiline-input" placeholder="例:不要醬料、加辣"></textarea>
                </form>
                <b>若此商品目前暫時無法供應</b>
                <div class="dropdown">
                    <input class="read" type="text" placeholder="選擇一個選項" readonly>
                    <div class="dropdown-content">
                        <div>將此商品從我的訂單移除</div>
                        <div>取消訂單或請店家打電話給我</div>
                    </div>
                </div>
                <br><br><br><br><br><br><br><br>
                <hr>
                <div class="products">
                    <h2>&nbsp;</h2>
                    <div class="product" data-name="好事花生牛肉紫米漢堡" data-price="104" data-image="./img/好事花生紫米堡.jfif">
                        <button class="quantity-button decrease">-</button>
                        <input value="1" min="1" class="quantity-input" readonly>
                        <button class="quantity-button increase">+</button>
                        <button class="add-to-cart bg-warning rounded border-warning card-shopbtn" data-egg="addEgg">放入購物車</button>
                    </div>
                </div>
                <br>
            </div>
        </div>

    

    <!-- 背景遮罩 -->
    <div class="popup-overlay" onclick="closeAllPopups()"></div>

    <br><br><br><br><br><br><br><br><br><br><br><br><br><br>

    <hr>
    <!-- 回到頂部按鈕 -->
    <button class="go-top" onclick="goToTop()">Top</button>

    <hr>
</body>

<script>
    window.onresize = function () {
        var element = document.getElementById("elementToHide");
        if (window.innerWidth < 768) { // 調整此數值以設定觸發隱藏的網頁寬度閾值
            element.classList.add("hidden");
        } else {
            element.classList.remove("hidden");
        }
    };



    // 導覽列左右滑動設定
    // script.js
    document.addEventListener('DOMContentLoaded', function () {
        const scrollAmount = 150; // 每次滾動的像素數量
        const scrollLeftBtn = document.getElementById('scroll-left');
        const scrollRightBtn = document.getElementById('scroll-right');
        const navWrapper = document.querySelector('.nav-wrapper');
        const navtest = document.querySelector('.navtest');

        function updateButtons() {
            // 檢查是否需要顯示/隱藏按鈕
            const maxScrollLeft = nav.scrollWidth - navWrapper.clientWidth;
            scrollLeftBtn.style.display = navWrapper.scrollLeft > 0 ? 'block' : 'none';
            scrollRightBtn.style.display = navWrapper.scrollLeft < maxScrollLeft ? 'block' : 'none';
        }

        scrollLeftBtn.addEventListener('click', function () {
            navWrapper.scrollBy({
                left: -scrollAmount,
                behavior: 'smooth'
            });
        });

        scrollRightBtn.addEventListener('click', function () {
            navWrapper.scrollBy({
                left: scrollAmount,
                behavior: 'smooth'
            });
        });

        // 初始化按鈕狀態
        updateButtons();

        // 添加滾動事件監聽器來更新按鈕狀態
        navWrapper.addEventListener('scroll', updateButtons);
    });



    // 漢堡選單JS

    function myFunction() {
        var x = document.getElementById("myLinks");
        if (x.style.display === "block") {
            x.style.display = "none";
        } else {
            x.style.display = "block";
        }
    }


    // 滾動條滾動時檢查顯示或隱藏回到頂部按鈕
    window.onscroll = function () { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.querySelector('.go-top').classList.add('show');
        } else {
            document.querySelector('.go-top').classList.remove('show');
        }
    }

    // 回到頂部函數
    function goToTop() {
        document.body.scrollTop = 0; // For Safari
        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    }

    //card呼叫JS

    // 關閉彈出式卡片
    function closePopup(id) {
        document.getElementById(id).classList.remove('show');
        document.querySelector('.popup-overlay').classList.remove('show');
    }

    // 關閉所有彈出式卡片
    function closeAllPopups() {
        document.querySelectorAll('.popup-card').forEach(function (card) {
            card.classList.remove('show');
        });
        document.querySelector('.popup-overlay').classList.remove('show');
    }



    // 當頁面加載完畢後設置按鈕的點擊事件
    document.addEventListener("DOMContentLoaded", function () {
        const popupButtons = document.querySelectorAll(".popup-button");

        // 為每個按鈕添加點擊事件
        popupButtons.forEach(function (button) {
            button.addEventListener("click", function () {
                const targetId = button.getAttribute("data-target");
                // 先關閉所有彈出式卡片
                closeAllPopups();
                // 再顯示目標卡片和背景遮罩
                document.getElementById(targetId).classList.add('show');
                document.querySelector('.popup-overlay').classList.add('show');
            });
        });
    });

    // 下拉選單JS
    // 為下拉菜單項目添加點擊事件，將所選值設置為輸入框的值
    document.querySelectorAll('.dropdown-content div').forEach(function (item) {
        item.addEventListener('click', function () {
            var input = item.parentElement.previousElementSibling;
            input.value = item.textContent;
            item.parentElement.style.display = 'none'; // 隱藏下拉菜單
        });
    });

    // 點擊輸入框之外的地方隱藏下拉菜單
    document.addEventListener('click', function (event) {
        var dropdowns = document.querySelectorAll('.dropdown-content');
        dropdowns.forEach(function (dropdown) {
            if (!dropdown.parentElement.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });
    });

    // 輸入框獲得焦點時顯示下拉菜單
    document.querySelectorAll('.dropdown input').forEach(function (input) {
        input.addEventListener('focus', function () {
            this.nextElementSibling.style.display = 'block';
        });
    });

    //加入購物車 JS
    document.addEventListener("DOMContentLoaded", function () {
        const addToCartButtons = document.querySelectorAll(".add-to-cart");
        const cart = document.querySelector(".cart");
        const closeCartButton = document.querySelector(".close-cart");
        const cartItemsElement = document.querySelector(".cart-items");
        const cartTotalElement = document.querySelector(".cart-total span");
        let cartItems = [];

        function calculateTotalPrice(basePrice, addEgg) {
            let totalPrice = basePrice;
            if (addEgg) {
                totalPrice += 15; // 加蛋的價格
            }
            return totalPrice;
        }

        function addToCart(name, basePrice, quantity, image, addEgg) {
            const price = calculateTotalPrice(basePrice, addEgg);
            const existingItemIndex = cartItems.findIndex(item => item.name === name && item.addEgg === addEgg);
            if (existingItemIndex !== -1) {
                cartItems[existingItemIndex].quantity += quantity;
            } else {
                cartItems.push({ name, price, quantity, image, addEgg });
            }
            renderCart();
            cart.classList.add("show");
        }

        function removeFromCart(index) {
            cartItems.splice(index, 1);
            renderCart();
        }

        function renderCart() {
            cartItemsElement.innerHTML = "";
            let total = 0;
            cartItems.forEach((item, index) => {
                const cartItem = document.createElement("div");
                cartItem.textContent = `${item.name} x ${item.quantity} - $${item.price * item.quantity}`;

                if (item.addEgg) {
                    const addEggLabel = document.createElement("span");
                    addEggLabel.textContent = " (加蛋)";
                    cartItem.appendChild(addEggLabel);
                }

                const img = document.createElement("img");
                img.src = item.image;
                img.style.width = "70px"; // 調整圖片大小
                img.style.margin = "15px"
                cartItem.appendChild(img);

                const removeButton = document.createElement("button");
                removeButton.textContent = "移除";
                removeButton.classList.add("cart-item-remove"); // 添加样式类
                removeButton.addEventListener("click", (event) => {
                    event.stopPropagation(); // 阻止事件冒泡
                    removeFromCart(index);
                });

                cartItem.appendChild(removeButton);
                cartItemsElement.appendChild(cartItem);
                total += item.price * item.quantity;
            });
            cartTotalElement.textContent = total.toFixed(2);
        }

        addToCartButtons.forEach(button => {
            button.addEventListener("click", () => {
                const product = button.parentElement;
                const name = product.dataset.name;
                const price = parseFloat(product.dataset.price);
                const quantityInput = product.querySelector(".quantity-input");
                const quantity = parseInt(quantityInput.value);
                const image = product.dataset.image;
                const addEgg = document.querySelector('#addEgg').checked;
                addToCart(name, price, quantity, image, addEgg);
            });
        });

        document.querySelectorAll('.decrease').forEach(item => {
            item.addEventListener('click', event => {
                let input = item.nextElementSibling;
                let value = parseInt(input.value);
                if (value > 1) {
                    input.value = value - 1;
                }
            });
        });

        document.querySelectorAll('.increase').forEach(item => {
            item.addEventListener('click', event => {
                let input = item.previousElementSibling;
                let value = parseInt(input.value);
                input.value = value + 1;
            });
        });

        closeCartButton.addEventListener("click", () => {
            cart.classList.remove("show");
        });
    });


    // 在購物車以外的地方點擊時關閉購物車
    // document.addEventListener("click", (event) => {
    //     if (!cart.contains(event.target) && !event.target.classList.contains("add-to-cart") && !event.target.classList.contains("quantity-button")) {
    //         cart.classList.remove("show");
    //     }
    // });

    // 獲取按鈕元素
    const showCartButton = document.getElementById("show-cart-button");

    // 添加點擊事件監聽器
    showCartButton.addEventListener("click", function () {
        const cart = document.querySelector(".cart");
        // 切換顯示/隱藏購物車
        cart.classList.toggle("show");
    });

    // 修正的地址輸入框事件處理
    document.addEventListener("DOMContentLoaded", function () {
        const addressInput = document.querySelector("#address-input");
        const submitButton = document.querySelector("#submit-button");
        const addressDisplay = document.querySelector("#address-display"); // 新增

        // 監聽按鈕的點擊事件
        submitButton.addEventListener("click", function (event) {
            event.preventDefault(); // 防止表單提交

            const address = addressInput.value.trim(); // 獲取並清理地址輸入框的值
            if (address !== "") {
                // 如果地址不為空，則執行相應操作
                handleAddressInput(address);                    
            }
        });

        // 定義處理地址輸入的函數
        function handleAddressInput(address) {
            // 將地址顯示在元素中
            addressDisplay.textContent = "地址：" + address; // 更新此行以適應您的需求
            // 隱藏地址輸入框
            addressInput.style.display = "none";
        }
    });


    
    
</script>

</html>